---
-  assert:
    that:
      - add_repo_key_url is defined
      - add_repo_urls is defined
      - add_repo_filename is defined
      - add_repo_name is defined
    fail_msg: Required variable is not defined for {{ repo_name }}.

# XXX: Figure out how to do this
# - name: "Remove old APT repository for {{ repo_name }}"
#   apt_repository:
#     repo: "{{ repo_url }}"
#     filename: "{{ filename }}"
#     state: absent

-
  become: yes # noqa: yaml[truthy]
  apt_key:
    url: "{{ add_repo_key_url }}"
    state: present

-
  become: yes # noqa: yaml[truthy]
  apt_repository:
    repo: "{{ add_repo_item }}"
    filename: "{{ add_repo_filename }}"
    state: present
  loop: "{{ add_repo_urls }}"
