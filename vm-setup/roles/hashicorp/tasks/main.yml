---
- name: Make sure the github version file exists
  file:
    path: "{{ version_tracking_file }}"
    state: touch
    mode: '0600'

- name: Slurp the github version tracking file
  slurp:
    src: "{{ hashicorp_version_tracking_file }}"
  register: github_version_tracking_file_content

- name: Convert github version tracking file content to YAML and register it
  set_fact:
    hashicorp_version_tracking_yaml: "{{ (github_version_tracking_file_content['content'] | b64decode) | from_yaml }}"

- name: Set current version
  set_fact:
    hashicorp_asset_current_version: "{{ hashicorp_version_tracking_yaml[hashicorp_asset_name] | default('0') }}"

#- name: Dump version information using the github_asset_name variable
#  debug:
#    msg: "Current version of {{ github_asset_name }}: {{ github_asset_current_version }}"


