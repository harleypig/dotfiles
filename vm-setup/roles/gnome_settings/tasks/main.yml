---
- name: Install Gnome Settings Packages
  become: yes # noqa: yaml[truthy]
  apt:
    name: "{{ gnome_settings_packages }}"
    state: present
    update_cache: true

- name: Include Tilix handling task if tilix_profile_filename is set
  include_tasks: tilix.yml
  when: gnome_settings_tilix_profile_filename is defined and gnome_settings_tilix_profile_filename | length > 0

- name: Include Gnome Settings tasks
  include_tasks: gnome_settings.yml

#############################################################################
- name: Ensure /etc/gnome-initial-setup directory exists
  become: yes # noqa: yaml[truthy]
  file:
    path: /etc/gnome-initial-setup
    state: directory
    mode: "0755"

- name: Copy vendor.conf to /etc/gnome-initial-setup
  become: yes # noqa: yaml[truthy]
  copy:
    src: vendor.conf
    dest: /etc/gnome-initial-setup/vendor.conf
    mode: "0644"
