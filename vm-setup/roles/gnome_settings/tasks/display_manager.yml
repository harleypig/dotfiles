---
- name: Disable gdm3 display manager
  become: yes # noqa: yaml[truthy]
  systemd:
    name: gdm3
    state: stopped
    enabled: false
    masked: true

- name: Ensure LightDM is the default display manager
  become: yes # noqa: yaml[truthy]
  lineinfile:
    path: /etc/X11/default-display-manager
    regexp: '^/usr/sbin/'
    line: '/usr/sbin/lightdm'
    mode: '0644'
    create: true

-  become: yes # noqa: yaml[truthy]
  copy:
    src: 99-slick-greeter.conf
    dest: /etc/lightdm/lightdm.conf.d/99-slick-greeter.conf
    mode: "0644"

- name: Enable LightDM display manager
  become: yes # noqa: yaml[truthy]
  systemd:
    name: lightdm
    state: restarted
    enabled: true
    daemon_reload: true
