- name: Microsoft Repository

  vars:
    key_url: https://packages.microsoft.com/keys/microsoft.asc
    repo_url: deb https://packages.microsoft.com/ubuntu/20.04/prod focal main
    filename: microsoft

  tasks:
    - name: Install Microsoft Repository Public Key
      apt_key:
        url: {{ key_url }}
        state: present

    - name: Add Microsoft Repository
      apt_repository:
        repo: {{ repo_url }}
        filename: {{ filename }}
        state: present
