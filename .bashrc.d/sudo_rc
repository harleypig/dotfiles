# shellcheck shell=bash
# https://unix.stackexchange.com/a/584733/9032

function sudo() {
  command sudo -v

  if [[ $(type -t "$1") == "alias" ]]; then
    set -- bash -ic "$(alias "$1"); $(printf "%q " "$@")"
  fi

  # what am I about to execute
  printf "%q " sudo "$@"
  echo

  # and do it
  command sudo "$@"
}
