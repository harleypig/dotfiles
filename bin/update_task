#!/bin/bash

BASE_DIR="$HOME/projects/taskwarrior/task"

cd "$BASE_DIR" || {
  echo "Unable to cd to $BASE_DIR, exiting."
  exit 1
}

set_title "$(basename "$0")"

# start clean
git clean -xf

# update flexget
git fetch --all --tags
git pull

cmake -DCMAKE_BUILD_TYPE=release .
make
make test && sudo make install

set_title 'done_updating'
