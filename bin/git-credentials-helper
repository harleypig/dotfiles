#!/bin/bash
# This script expects the 'user' variable to be set, which it uses to find the corresponding password in ~/.netrc
# Git passes the following information to a credential helper:
# - protocol: The protocol (e.g., https or ssh).
# - host: The hostname of the server.
# - path: The path on the server.
# - username: The username for authentication.
# - password: The password for authentication.

GIT_CREDENTIALS="$(grep -A1 "$user" ~/.netrc | grep '^password' | awk '{print $2}')"

# After printing out the input, you can still output the password if needed
[[ -n $GIT_CREDENTIALS ]] && echo "password=$GIT_CREDENTIALS"
