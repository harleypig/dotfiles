#!/bin/bash

cache_dir="$PWD"
paths_file='mock-vault-paths.json'

# Default mode is null (just run the script)
mode=${1:-null}

case "$mode" in
  debug)
    # Start with pudb debugger
    python3 -m pudb ./get-vault-key.py \
      --cache-dir "$cache_dir" \
      --paths-file "$paths_file" \
      list root1/production
    ;;
  echo)
    # Just echo the command
    echo "./get-vault-key.py \
  --cache-dir \"$cache_dir\" \
  --paths-file \"$paths_file\" \
  list root1/production"
    ;;
  null|"")
    # Just run the command
    ./get-vault-key.py \
      --cache-dir "$cache_dir" \
      --paths-file "$paths_file" \
      list root1/production
    ;;
  *)
    echo "Error: Unknown mode '$mode'. Use one of: debug, echo, null"
    exit 1
    ;;
esac

