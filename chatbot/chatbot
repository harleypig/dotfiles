#!/usr/bin/env python

from vertexai.language_models import CodeChatSession

class ChatBot():
    def __init__():
        self.session = self._session()

    def _session(self, session_params=None):
        if session_params is None:
            session_params = {}

        session_params.setdefault('model', 'codechat-bison')

        # Create a CodeChatSession with the given parameters
        session = CodeChatSession(**session_params)

        # Send the prompt to the CodeChatSession and get the response
        response = session.send(session_params.get('prompt', ''), **session_params.get('chat_params', {}))

        # Return the response as a string
        return response.text

if __name__ == '__main__':
    chatbot = ChatBot()
    while True:
        message = input("You: ")
        if message.lower() == 'quit':
            break
        response = chatbot._session({'prompt': message})
        print("Bot:", response)
# Example usage:
# response = chat_with_codechat("Hello, how can I help you today?")
# print(response)
