#!/bin/bash

# shellcheck disable=SC1090
source "$(dirname "$(realpath ~/.bash_profile)")/utility"

# Change these to whatever you want to be displayed for good and bad exit
# statuses.

good_exit_text=':)'
bad_exit_text=':('

function __exit_status() {

  debug "exit status parms: $*"

  local -a status

  for s in "$@"; do

    # Wrap the exit symbols in appropriate ansi codes.
    #
    # If a command is still writing to the pipe and a later command exits, the
    # first command will exit with a status of 141.  This causes confusion
    # with commands like echo or head.
    #
    # Doing this *will* cause confusion if something does exit abnormally but
    # doesn't throw an appropriate exit status.

    debug "s: $s"

    case "$s" in
      0|141 ) status+=("$(ansi bg blue fg yellow)$good_exit_text$(ansi off)") ;;
      *) status+=("$(ansi bg red fg white)$bad_exit_text$(ansi off)") ;;
    esac

  done

  statuscodes=$(join_array ' | ' 'status')

  echo "$statuscodes"

}
